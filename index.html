<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Real-time ISS tracking with beautiful 3D solar system visualization">
    <title>Real-Time ISS & Solar System Visualization</title>

    <!-- Styles -->
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/ui.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <h1>üöÄ ISS Tracker</h1>
            <div class="loading-spinner"></div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="progress-percent">0%</span>
                </div>
            </div>
            <p id="loading-status">Initializing solar system...</p>
        </div>
    </div>

    <!-- Main 3D Canvas Container -->
    <div id="canvas-container"></div>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <!-- Header with Title and FPS -->
        <div id="header">
            <h1>üåç Real-Time ISS Tracker</h1>
            <div id="fps-counter">FPS: --</div>
        </div>

        <!-- Control Panel -->
        <div id="control-panel" class="panel">
            <h3>Controls</h3>

            <!-- Time Speed Slider -->
            <div class="control-group">
                <label for="time-speed">Time Speed: <span id="speed-value">100000x</span></label>
                <input type="range" id="time-speed" min="1" max="500000" value="100000" step="1000">
                <div class="preset-speeds">
                    <button data-speed="1000">1kx</button>
                    <button data-speed="10000">10kx</button>
                    <button data-speed="50000">50kx</button>
                    <button data-speed="100000">100kx</button>
                    <button data-speed="500000">500kx</button>
                </div>
            </div>

            <!-- Play/Pause -->
            <div class="control-group">
                <button id="play-pause" class="btn-primary">‚è∏ Pause</button>
                <button id="reset-camera" class="btn-secondary">üé• Reset Camera</button>
            </div>

            <!-- Visual Style Switcher -->
            <div class="control-group">
                <label>Visual Style:</label>
                <div class="style-buttons">
                    <button data-style="realistic" class="style-btn active">üåé Realistic</button>
                    <button data-style="cartoon" class="style-btn">üé® Cartoon</button>
                    <button data-style="neon" class="style-btn">‚ö° Neon</button>
                    <button data-style="minimalist" class="style-btn">‚óØ Minimal</button>
                </div>
            </div>

            <!-- Performance Slider -->
            <div class="control-group">
                <label for="performance-slider">Performance: <span id="performance-value">Medium (50%)</span></label>
                <input type="range" id="performance-slider" min="0" max="100" value="50" step="1">
                <div class="performance-markers">
                    <span>üêå Ultra Low</span>
                    <span>‚ö° Balanced</span>
                    <span>‚ú® Ultra High</span>
                </div>
                <p class="preset-description" id="preset-description">
                    Drag slider left for smoothness, right for quality
                </p>
            </div>

            <!-- Feature Toggles -->
            <div class="control-group">
                <label>Display:</label>
                <div class="toggles">
                    <label class="toggle">
                        <input type="checkbox" id="toggle-orbits" checked>
                        <span>Orbits</span>
                    </label>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-labels" checked>
                        <span>Labels</span>
                    </label>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-trails" checked>
                        <span>Trails</span>
                    </label>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-stars" checked>
                        <span>Stars</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Info Panel -->
        <div id="info-panel" class="panel">
            <h3>üõ∞Ô∏è ISS Status</h3>
            <div id="iss-info">
                <div class="info-row">
                    <span class="info-label">Position:</span>
                    <span id="iss-position">Loading...</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Altitude:</span>
                    <span id="iss-altitude">-- km</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Velocity:</span>
                    <span id="iss-velocity">-- km/h</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Last Update:</span>
                    <span id="iss-update-time">--</span>
                </div>
            </div>

            <h3>üìç Selected Object</h3>
            <div class="object-selector">
                <label for="object-dropdown">Quick Select:</label>
                <select id="object-dropdown">
                    <option value="">-- Select Object --</option>
                    <option value="sun">‚òÄÔ∏è Sun</option>
                    <option value="mercury">‚òøÔ∏è Mercury</option>
                    <option value="venus">‚ôÄÔ∏è Venus</option>
                    <option value="earth">üåç Earth</option>
                    <option value="mars">‚ôÇÔ∏è Mars</option>
                    <option value="jupiter">‚ôÉ Jupiter</option>
                    <option value="saturn">‚ôÑ Saturn</option>
                    <option value="uranus">‚õ¢ Uranus</option>
                    <option value="neptune">‚ôÜ Neptune</option>
                    <option value="moon">üåô Moon</option>
                    <option value="iss">üõ∞Ô∏è ISS</option>
                </select>
            </div>
            <div id="selected-info">
                <p>Click any object or use dropdown to see details</p>
            </div>
        </div>

        <!-- Help Button -->
        <button id="help-button" class="floating-btn" title="Help & Controls">
            ‚ùì
        </button>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üéÆ Controls & Help</h2>

            <h3>Camera Controls</h3>
            <ul>
                <li><strong>Left Click + Drag:</strong> Rotate camera</li>
                <li><strong>Right Click + Drag:</strong> Pan camera</li>
                <li><strong>Scroll Wheel:</strong> Zoom in/out</li>
                <li><strong>Touch:</strong> One finger rotate, two finger zoom/pan</li>
            </ul>

            <h3>Interactions</h3>
            <ul>
                <li><strong>Click Objects:</strong> Focus camera on planets or ISS</li>
                <li><strong>Time Speed:</strong> Adjust how fast time moves (1x to 50,000x)</li>
                <li><strong>Visual Styles:</strong> Switch between 4 different visual themes</li>
                <li><strong>Toggles:</strong> Show/hide orbits, labels, trails, and stars</li>
            </ul>

            <h3>Tips</h3>
            <ul>
                <li>Try <strong>2000x speed</strong> to see Earth complete an orbit in ~7 minutes</li>
                <li>Use <strong>Neon style</strong> for dramatic orbital trails</li>
                <li>Click <strong>Earth</strong> and zoom in to see the ISS orbit</li>
                <li>At high speeds, the ISS becomes a ring around Earth</li>
            </ul>

            <h3>About</h3>
            <p>This visualization uses real-time ISS position data from Open Notify API, updated every 5 seconds. The solar system uses simplified orbital mechanics for performance.</p>
        </div>
    </div>

    <!-- Load Three.js from CDN (using known working version) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Load OrbitControls from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Verify Three.js loaded and make it globally available -->
    <script>
        if (typeof THREE !== 'undefined') {
            window.THREE = THREE;
            console.log('‚úÖ Three.js library loaded (version:', THREE.REVISION, ')');

            // Verify OrbitControls loaded
            if (THREE.OrbitControls) {
                console.log('‚úÖ OrbitControls loaded');
            } else {
                console.error('‚ùå OrbitControls failed to load');
            }
        } else {
            console.error('‚ùå Failed to load Three.js from CDN');
            alert('Failed to load Three.js library. Please check your internet connection and refresh the page.');
        }
    </script>

    <!-- Main Application Entry Point (will load other modules as needed) -->
    <script type="module" src="src/main.js"></script>
</body>
</html>
